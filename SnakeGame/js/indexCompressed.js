/*
 * @Description: 
 * @Author: Zhe Sun
 * @Github: https://github.com/RobertZSun
 * @Date: 2020-04-09 04:39:36
 * @LastEditors: Zhe Sun
 * @LastEditTime: 2020-04-09 04:53:08
 */
"use strict";!function(t,e){var i={getRandom:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}};t.Tools=i}(window),function(t,e){function i(t){t=t||{},this.width=t.width||20,this.height=t.height||20,this.x=t.x||0,this.y=t.y||0,this.backgroundColor=t.backgroundColor||"red",this.box=null}function o(){for(var t=h.length-1;t>=0;t--){var e=h[t];e.parentNode.removeChild(e),h.splice(t,1)}}var h=[];i.prototype.render=function(t){o();var e=t.offsetWidth/this.width-1,i=t.offsetHeight/this.height-1;this.x=Tools.getRandom(0,e)*this.width,this.y=Tools.getRandom(0,i)*this.height;var s=document.createElement("div");t.appendChild(s),s.style.width=this.width+"px",s.style.height=this.height+"px",s.style.position="absolute",s.style.left=this.x+"px",s.style.top=this.y+"px",s.style.backgroundColor=this.backgroundColor,h.push(s),this.box=s},i.prototype.getRandomPosition=function(t){var e=t.offsetWidth/this.width-1,i=t.offsetHeight/this.height-1,o=Tools.getRandom(0,e)*this.width,h=Tools.getRandom(0,i)*this.height;this.box.style.left=o+"px",this.box.style.top=h+"px"},t.Food=i}(window),function(t,e){function i(t){var t=t||{};this.width=t.width||20,this.height=t.height||20,this.direction=t.direction||"right",this.body=[{x:3,y:2,color:"red"},{x:2,y:2,color:"blue"},{x:1,y:2,color:"blue"}]}function o(){for(var t=h.length-1;t>=0;t--){var e=h[t];e.parentNode.removeChild(e),h.splice(t,1)}}var h=[];i.prototype.render=function(t){o();for(var e=0,i=this.body.length;e<i;e++){var s=this.body[e],n=document.createElement("div");n.style.position="absolute",n.style.width=this.width+"px",n.style.height=this.height+"px",n.style.left=s.x*this.width+"px",n.style.top=s.y*this.height+"px",n.style.backgroundColor=s.color,t.appendChild(n),h.push(n)}},i.prototype.move=function(t,e){for(var i=this.body.length-1;i>0;i--){this.body[i];this.body[i].x=this.body[i-1].x,this.body[i].y=this.body[i-1].y}var o=this.body[0];switch(this.direction){case"right":o.x+=1;break;case"left":o.x-=1;break;case"up":o.y-=1;break;case"down":o.y+=1}var h=o.x*this.width,s=o.y*this.height;if(h===t.x&&s===t.y){var n=this.body[this.body.length-1];this.body.push({x:n.x,y:n.y,color:n.color}),t.render(e)}},t.Snake=i}(window),function(t,e){function i(t){this.parentNode=t,this.food=new Food,this.snake=new Snake,s=this}function o(){var t=setInterval(function(){this.snake.move(this.food,this.parentNode),this.snake.render(this.parentNode);var e=this.parentNode.offsetWidth/this.snake.width,i=this.parentNode.offsetHeight/this.snake.height,o=this.snake.body[0].x,h=this.snake.body[0].y,s=o<0||o>e-1,n=h<0||h>i-1;(s||n)&&(alert("Game Over!"),clearInterval(t))}.bind(s),150)}function h(){document.addEventListener("keydown",function(t){switch(t.keyCode){case 37:this.snake.direction="left";break;case 38:this.snake.direction="up";break;case 39:this.snake.direction="right";break;case 40:this.snake.direction="down"}}.bind(s),!1)}var s;i.prototype.start=function(){this.food.render(this.parentNode),this.snake.render(this.parentNode),o(),h()},t.Game=i}(window),function(t,e){var i=document.getElementById("map");new Game(i).start()}(window);